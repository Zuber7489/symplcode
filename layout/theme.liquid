{%- comment %}<locksmith:5f8f>{%- endcomment %}
{%- include 'locksmith' -%}
{%- comment %}</locksmith:5f8f>{%- endcomment %}

<!doctype html>
<html class="no-js" lang="{{ request.locale.iso_code }}">
  <head>
    {{ locksmith_initializations }}
    <script>
      var head = document.head;
      var script = document.createElement('script');
      script.type = 'text/javascript';
      script.src = "https://185274.t.hyros.com/v1/lst/universal-script?ph=05b7b608ab3f3866a6689b208475f3685a2097827b8af2716f74a281a51bde95&tag=!clicked&origin=SHOPIFY&ref_url=" + document.URL ;
      head.appendChild(script);
    </script>

    <meta charset="utf-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width,initial-scale=1">
    <meta name="theme-color" content="">
    <link rel="canonical" href="{{ canonical_url }}">

    <script src="https://kit.fontawesome.com/5e226041e5.js" crossorigin="anonymous"></script>
    <link rel="preconnect" href="https://fonts.googleapis.com">
<link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
<link href="https://fonts.googleapis.com/css2?family=Bebas+Neue&display=swap" rel="stylesheet">

    {%- if settings.favicon != blank -%}
      <link rel="icon" type="image/png" href="{{ settings.favicon | img_url: '32x32' }}">
    {%- endif -%}

    <title>
      {{ page_title }}
      {%- if current_tags %} &ndash; tagged "{{ current_tags | join: ', ' }}"{% endif -%}
      {%- if current_page != 1 %} &ndash; Page {{ current_page }}{% endif -%}
      {%- unless page_title contains shop.name %} &ndash; {{ shop.name }}{% endunless -%}
    </title>

    {% if page_description %}
      {%- comment %}<locksmith:4660>{%- endcomment %}
      {%- capture var %}{% render 'locksmith-variables', variable: 'transparent', hiding_scope: 'resource' %}{% endcapture -%}
      {%- if var == 'true' %}<meta name="description" content="{{ page_description | escape }}">{% endif -%}
      {%- comment %}original: <meta name="description" content="{{ page_description | escape }}">{%- endcomment %}
      {%- comment %}</locksmith:4660>{%- endcomment %}
    {% endif %}
    <script src="{{ 'jquery.js' | asset_url}}"></script>

    {% render 'meta-tags' %}
    {% render 'header-css' %}
    {%- render 'header-scripts.zipifypages', renderctx: 'thm' -%}
    {{ content_for_header }}
    {%- render 'bold-common' -%}
    {%- render 'bold-includes' -%}
    {% if template contains 'customers' %}
      {{ 'shopify_common.js' | shopify_asset_url | script_tag }}
    {% endif %}

    <!-- <script async defer src="https://tools.luckyorange.com/core/lo.js?site-id=5b6e8bf0"></script> -->

    {% render 'judgeme_core' %}

    {{ shop.metafields.loox.global_html_head }}

    {% if content_for_header contains 'fastbundle.co' %}
      {% render 'fast_bundle_service' %}
    {% endif %}

    {% if template contains 'cart' %}
      {{ 'base.css' | asset_url | stylesheet_tag }}
    {% endif %}

    <script src="{{ 'cart.js' | asset_url}}" defer="defer"></script>

    {% include 'bss-product-labels-configs' %}

    <style>
      .collection-info .btn {
          background-color: transparent !important;
          border: 1px solid !important;
          color: black !important;
        font-size: 1.6rem !important;
        font-family: 'HelveticaNeue' !important;
      }
      .collection-info .btn:hover {
          background: #000 !important;
          color: #ffffff !important;
          -webkit-transition: 0.5s ease all !important;
          -o-transition: 0.5s ease all !important;
          transition: 0.5s ease all !important;
      }
    </style>

    {% render 'shogun-head' %}
  </head>

  <body class="gradient {{ template.name }} {{ page_image }}" id="{{ page_title }}">
    <div id="page">
      {% section 'slide-cart' %}
      {% section 'header' %}
      {% capture ICART_FULL_PAGE_LAYOUT %}{{ content_for_layout }}{% endcapture -%}
      {%- include 'icart-variables', ICART_FULL_PAGE_LAYOUT: ICART_FULL_PAGE_LAYOUT %}

      {% section 'footer' %}
    </div>
    {% render 'footer-scripts' %}
 
    {% if template contains 'collection' %}
      <style>
        body{background:#F5F5F5}
      </style>
    {% endif %}

    <!--
      <script>
              var value= jQuery('.single_product_wraps h3').text();
        if (value == 'Get 50% off with the purchase of any symplº traction pad (Use code 50OFFEXTENDER).'){
            var removeData=value.replace("(Use code 50OFFEXTENDER).","<div class='my_text' style='font-size: 16px;padding-top: 10px;'>(Use code 50OFFEXTENDER).</div>");
            jQuery('.single_product_wraps h3').empty().append(removeData);
        }
              else if (value == 'Get 50% off with the purchase of a symplº front traction pad (Use code 50OFFSPACER).'){
                var removeData=value.replace("(Use code 50OFFSPACER).","<div class='my_text' style='font-size: 16px;padding-top: 10px;'>(Use code 50OFFSPACER).</div>");
              jQuery('.single_product_wraps h3').empty().append(removeData);
              }
              else {
                jQuery('.single_product_wraps h3').empty().append(value);
              }
      </script>
    -->

    {%- render 'page-footer.zipifypages', renderctx: 'thm', ocuapp: oneclickupsellapp -%}
    {{ shop.metafields.loox.global_html_body }}

    <!-- PickyStory snippet "main_widget_script", do not modify. Safe to remove after the app is uninstalled -->
    {% if content_for_header contains 'pickystory' %}
      <script defer src="https://cdn.pickystory.com/widget/dist/latest/pickystory-widget.min.js"></script>
    {% endif %}
    <!-- PickyStory end snippet "main_widget_script" -->
    {% include 'appikon-pre-order-helper' -%}
    {%- include 'appikon-pre-order-cart-items-liquid-helper' -%}
    {%- include 'appikon-pre-order-product-liquid-helper' %}
    {% if content_for_header contains 'product_label' -%}
      {%- include 'bss-product-label-js' -%}
      {%- include 'bss-label-style-css' -%}
      {%- include 'bss-product-label-fonts' -%}
    {%- endif %}
  </body>
  <script>
  document.addEventListener('DOMContentLoaded', function() {
    // Function to handle scroll
    function handleScroll() {
      var header = document.getElementById('header');
      if (window.scrollY > 10) {
        header.classList.add('scrolling_down');
      } else {
        header.classList.remove('scrolling_down');
      }
    }
    
    // Add scroll event listener
    window.addEventListener('scroll', handleScroll);
    
    // Call once on page load to set initial state
    handleScroll();
  });

  // Global cart close functionality - works on all pages
  document.addEventListener('click', function(event) {
    // Check if cart is open
    if ($('.r-side-cart').hasClass('active') || $('body').hasClass('g-cart-open')) {
      // Check if the clicked element is not inside the cart or cart buttons
      const cartElement = document.querySelector('.r-side-cart');
      const cartButton = document.querySelector('.cart-i');
      const cartCloseButton = document.querySelector('.cart-icon');
      
      // Check if click is outside cart and not on cart buttons
      const isClickInsideCart = cartElement && cartElement.contains(event.target);
      const isClickOnCartButton = cartButton && cartButton.contains(event.target);
      const isClickOnCartCloseButton = cartCloseButton && cartCloseButton.contains(event.target);
      
      if (!isClickInsideCart && !isClickOnCartButton && !isClickOnCartCloseButton) {
        // Close the cart
        $('.r-side-cart').removeClass('active');
        $('body').removeClass('g-cart-open');
      }
    }
  });

  // Additional click handler for cart overlay
  document.addEventListener('DOMContentLoaded', function() {
    const cartOverlay = document.querySelector('.cart-overlay');
    if (cartOverlay) {
      cartOverlay.addEventListener('click', function() {
        $('.r-side-cart').removeClass('active');
        $('body').removeClass('g-cart-open');
      });
    }
  });

  // Enhanced global click handler with jQuery for better compatibility
  $(document).on('click', function(event) {
    // Check if cart is open
    if ($('.r-side-cart').hasClass('active') || $('body').hasClass('g-cart-open')) {
      // Check if the clicked element is not inside the cart or cart buttons
      const $target = $(event.target);
      const $cart = $('.r-side-cart');
      const $cartButton = $('.cart-i');
      const $cartCloseButton = $('.cart-icon');
      
      // Check if click is outside cart and not on cart buttons
      const isClickInsideCart = $cart.length && $target.closest('.r-side-cart').length > 0;
      const isClickOnCartButton = $cartButton.length && $target.closest('.cart-i').length > 0;
      const isClickOnCartCloseButton = $cartCloseButton.length && $target.closest('.cart-icon').length > 0;
      
      if (!isClickInsideCart && !isClickOnCartButton && !isClickOnCartCloseButton) {
        // Close the cart
        $('.r-side-cart').removeClass('active');
        $('body').removeClass('g-cart-open');
      }
    }
  });

  // All cart tracking removed to prevent infinite cart.js calls
  </script>
</html>
